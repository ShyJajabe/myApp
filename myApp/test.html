<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
        body, html{width: 100%;height: 100%;margin:0;font-family:"微软雅黑";}
        #allmap{height:500px;width:100%;}
        #r-result{width:100%;}
    </style>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=72QwzLvIzM9Y2NAGEpGa7ZSDf3iMTRGG"></script>
    <title>添加/删除覆盖物</title>
</head>
<body>
<div id="allmap"></div>
<div id="r-result">
    <input type="button" onclick="add_overlay();" value="添加覆盖物" />
    <input type="button" onclick="remove_overlay();" value="删除覆盖物" />
</div>
</body>
</html>
<script type="text/javascript">
    // 百度地图API功能
    var map = new BMap.Map("allmap");
    var point = new BMap.Point(116.404, 39.915);
    map.centerAndZoom(point, 15);
    var arr=new Array();
    map.addEventListener("click",function(e){
        console.log(e);
        alert(e.point.lng + "," + e.point.lat);
        //var marker=new BMap.Marker(new BMap.Point(e.point.lng, e.point.lat),{icon:{fillColor:"blue"}});
        var marker= new BMap.Marker(new BMap.Point(e.point.lng,e.point.lat), {
            // 初始化五角星symbol
            icon: new BMap.Symbol(BMap_Symbol_SHAPE_CIRCLE, {
                scale: 10,
                fillColor: "pink",
                fillOpacity: 1,
                strokeColor:"pink"
            })
        });   //var circle = new BMap.Circle(new BMap.Point(e.point.lng, e.point.lat),5,{strokeColor:"#fff", strokeWeight:20, strokeOpacity:1}); //创建圆
        map.addOverlay(marker);
        arr.push(marker);
        //console.log(circle)
        console.log(arr[0]);
        var label = new BMap.Label("我是文字标注哦fggggg",{offset:new
        BMap.Size(20,-10)});
        arr[arr.length-1].setLabel(label);
        arr[arr.length-1].enableDragging();
        console.log(arr[arr.length])
    });

//    var json_data = [[116.404,39.915],[116.383752,39.91334],[116.384502,39.932241]];
//    var pointArray = new Array();
//    for(var i=0;i<json_data.length;i++){
//        var marker = new BMap.Marker(new BMap.Point(json_data[i][0], json_data[i][1])); // 创建点
//        map.addOverlay(marker);    //增加点
//        pointArray[i] = new BMap.Point(json_data[i][0], json_data[i][1]);
//        marker.addEventListener("click",attribute);
//    }
//    //让所有点在视野范围内
//    map.setViewport(pointArray);
//    //获取覆盖物位置
//    function attribute(e){
//        var p = e.target;
//        alert("marker的位置是" + p.getPosition().lng + "," + p.getPosition().lat);
//    }

    //添加覆盖物
    function add_overlay(){

    }
    //清除覆盖物
    function remove_overlay(){
        map.clearOverlays();
    }
</script>
